{"ast":null,"code":"import _regeneratorRuntime from\"D:/Programming/Projects/Blog Website/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Programming/Projects/Blog Website/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Programming/Projects/Blog Website/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useState}from\"react\";import{Navigate}from\"react-router-dom\";import{UserContext}from\"../UserContext\";import{BASE_URL}from'../helper.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginPage(){var _login;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),redirect=_useState6[0],setRedirect=_useState6[1];var _useContext=useContext(UserContext),setUserInfo=_useContext.setUserInfo;var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),show=_useState8[0],setShow=_useState8[1];var handleShow=function handleShow(){setShow(!show);};function login(_x){return(_login=_login||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(ev){var response,userInfo,errorData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:ev.preventDefault();_context.prev=1;_context.next=4;return fetch(\"\".concat(BASE_URL,\"/login\"),{method:'POST',body:JSON.stringify({username:username,password:password}),headers:{'Content-Type':'application/json'},credentials:'include'});case 4:response=_context.sent;if(!response.ok){_context.next=13;break;}_context.next=8;return response.json();case 8:userInfo=_context.sent;setUserInfo(userInfo);setRedirect(true);_context.next=17;break;case 13:_context.next=15;return response.json();case 15:errorData=_context.sent;alert(\"Login failed: \".concat(errorData.message));case 17:_context.next=23;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](1);console.error('Login error:',_context.t0);alert('An error occurred during login.');case 23:case\"end\":return _context.stop();}},_callee,null,[[1,19]]);}))).apply(this,arguments);}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/'});}return/*#__PURE__*/_jsxs(\"form\",{className:\"login\",onSubmit:login,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"username\",value:username,onChange:function onChange(ev){return setUsername(ev.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:show?\"text\":\"password\",placeholder:\"password\",value:password,onChange:function onChange(ev){return setPassword(ev.target.value);}}),/*#__PURE__*/_jsx(\"label\",{type:\"button\",className:\"my-2\",htmlFor:\"password\",onClick:handleShow,style:{cursor:'pointer'},children:show?\"Hide\":\"Show\"}),/*#__PURE__*/_jsx(\"button\",{children:\"Login\"})]});}","map":{"version":3,"names":["useContext","useState","Navigate","UserContext","BASE_URL","jsx","_jsx","jsxs","_jsxs","LoginPage","_login","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","redirect","setRedirect","_useContext","setUserInfo","_useState7","_useState8","show","setShow","handleShow","login","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee","ev","response","userInfo","errorData","wrap","_callee$","_context","prev","next","preventDefault","fetch","concat","method","body","JSON","stringify","headers","credentials","sent","ok","json","alert","message","t0","console","error","stop","apply","arguments","to","className","onSubmit","children","type","placeholder","value","onChange","target","htmlFor","onClick","style","cursor"],"sources":["D:/Programming/Projects/Blog Website/client/src/pages/LoginPage.js"],"sourcesContent":["import {useContext, useState} from \"react\";\r\nimport {Navigate} from \"react-router-dom\";\r\nimport {UserContext} from \"../UserContext\";\r\nimport {BASE_URL} from '../helper.js'\r\n\r\nexport default function LoginPage() {\r\n  const [username,setUsername] = useState('');\r\n  const [password,setPassword] = useState('');\r\n  const [redirect,setRedirect] = useState(false);\r\n  const {setUserInfo} = useContext(UserContext);\r\n  const [show, setShow] = useState(false);\r\n\r\n  const handleShow = () => {\r\n    setShow(!show);\r\n  };\r\n  \r\n  async function login(ev) {\r\n    ev.preventDefault();\r\n    try {\r\n        const response = await fetch(`${BASE_URL}/login`, {\r\n          method: 'POST',\r\n          body: JSON.stringify({ username, password }),\r\n          headers: { 'Content-Type': 'application/json' },\r\n          credentials: 'include',\r\n        });\r\n      \r\n        if (response.ok) {\r\n          const userInfo = await response.json();\r\n          setUserInfo(userInfo);\r\n          setRedirect(true);\r\n        } else {\r\n          const errorData = await response.json();\r\n          alert(`Login failed: ${errorData.message}`);\r\n        }\r\n      } catch (error) {\r\n        console.error('Login error:', error);\r\n        alert('An error occurred during login.');\r\n      }\r\n      \r\n  }\r\n\r\n  if (redirect) {\r\n    return <Navigate to={'/'} />\r\n  }\r\n  return (\r\n    <form className=\"login\" onSubmit={login}>\r\n      <h1>Login</h1>\r\n      <input type=\"text\"\r\n             placeholder=\"username\"\r\n             value={username}\r\n             onChange={ev => setUsername(ev.target.value)}/>\r\n      <input type={show ? \"text\" : \"password\"}\r\n             placeholder=\"password\"\r\n             value={password}\r\n             onChange={ev => setPassword(ev.target.value)}/>\r\n      <label type=\"button\" className=\"my-2\" htmlFor=\"password\" onClick={handleShow} style={{cursor:'pointer'}} >\r\n              {show ? \"Hide\" : \"Show\"}\r\n            </label>       \r\n      <button>Login</button>\r\n    </form>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}