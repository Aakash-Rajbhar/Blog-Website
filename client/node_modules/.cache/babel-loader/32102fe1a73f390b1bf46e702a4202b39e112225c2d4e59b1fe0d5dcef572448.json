{"ast":null,"code":"import _regeneratorRuntime from\"D:/Programming/Projects/Blog Website/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Programming/Projects/Blog Website/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Programming/Projects/Blog Website/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'react-quill/dist/quill.snow.css';import{Navigate,useParams}from\"react-router-dom\";import Editor from'../components/Editor';import{BASE_URL}from'../helper.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditPost=function EditPost(){var _updatePost;var _useParams=useParams(),id=_useParams.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),summary=_useState4[0],setSummary=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),files=_useState8[0],setFiles=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),redirect=_useState10[0],setRedirect=_useState10[1];useEffect(function(){fetch(\"\".concat(BASE_URL,\"/post/\")+id).then(function(response){response.json().then(function(postInfo){setTitle(postInfo.title);setContent(postInfo.content);setSummary(postInfo.summary);});});// eslint-disable-next-line \n},[]);function updatePost(_x){return(_updatePost=_updatePost||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var data,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();data=new FormData();data.set('title',title);data.set('content',content);data.set('summary',summary);data.set('id',id);if(files!==null&&files!==void 0&&files[0]){data.set('file',files===null||files===void 0?void 0:files[0]);}_context.next=9;return fetch('http://localhost:4000/post',{method:'PUT',body:data,credentials:'include'});case 9:response=_context.sent;if(response.ok){setRedirect(true);}case 11:case\"end\":return _context.stop();}},_callee);}))).apply(this,arguments);}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/post/'+id});}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:updatePost,children:[/*#__PURE__*/_jsx(\"input\",{type:\"title\",placeholder:\"Title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"summary\",placeholder:\"Summary\",value:summary,onChange:function onChange(e){return setSummary(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return setFiles(e.target.files);}}),/*#__PURE__*/_jsx(Editor,{onChange:setContent,value:content}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{marginTop:'10px'},children:\"Update Post\"})]});};export default EditPost;","map":{"version":3,"names":["React","useState","useEffect","Navigate","useParams","Editor","BASE_URL","jsx","_jsx","jsxs","_jsxs","EditPost","_updatePost","_useParams","id","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","summary","setSummary","_useState5","_useState6","content","setContent","_useState7","_useState8","files","setFiles","_useState9","_useState10","redirect","setRedirect","fetch","concat","then","response","json","postInfo","updatePost","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","data","wrap","_callee$","_context","prev","next","preventDefault","FormData","set","method","body","credentials","sent","ok","stop","apply","arguments","to","onSubmit","children","type","placeholder","value","onChange","target","style","marginTop"],"sources":["D:/Programming/Projects/Blog Website/client/src/pages/EditPost.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport {Navigate, useParams} from \"react-router-dom\";\r\nimport Editor from '../components/Editor';\r\nimport {BASE_URL} from '../helper.js'\r\n\r\nconst EditPost = () => {\r\n\r\n    const {id} = useParams()\r\n    const [title,setTitle] = useState('')\r\n    const [summary,setSummary] = useState('')\r\n    const [content,setContent] = useState('')\r\n    const [files, setFiles] = useState('');\r\n    const [redirect, setRedirect] = useState(false)\r\n\r\n    useEffect(()=>{\r\n        fetch(`${BASE_URL}/post/`+id).then(response => {\r\n            response.json().then(postInfo => {\r\n                setTitle(postInfo.title);\r\n                setContent(postInfo.content);\r\n                setSummary(postInfo.summary);\r\n            })\r\n        })\r\n        // eslint-disable-next-line \r\n    },[])\r\n\r\n    async function updatePost(e){\r\n        e.preventDefault();\r\n        const data = new FormData()\r\n        data.set('title', title);\r\n        data.set('content', content);\r\n        data.set('summary', summary);\r\n        data.set('id', id);\r\n        if(files?.[0]){\r\n\r\n            data.set('file', files?.[0])\r\n        }\r\n        const response = await fetch('http://localhost:4000/post',{\r\n            method: 'PUT',\r\n            body: data,\r\n            credentials: 'include',\r\n        });\r\n\r\n        if(response.ok){\r\n\r\n            setRedirect(true);\r\n        }\r\n\r\n    }\r\n\r\n    if (redirect){\r\n        return <Navigate to={'/post/'+id} />\r\n    }\r\n\r\n  return (\r\n    <form onSubmit={updatePost}>\r\n        <input type=\"title\" placeholder='Title' value={title} onChange={e => setTitle(e.target.value)} />\r\n        \r\n        <input type=\"summary\" placeholder='Summary' value={summary} onChange={e => setSummary(e.target.value)}  />\r\n\r\n        <input type=\"file\" onChange={(e => setFiles(e.target.files))}  />\r\n        \r\n        <Editor onChange={setContent} value={content}/>\r\n\r\n        <button type='submit' style={{marginTop: '10px'}}>Update Post</button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default EditPost\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}