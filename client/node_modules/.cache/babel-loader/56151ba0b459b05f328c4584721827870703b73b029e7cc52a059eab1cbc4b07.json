{"ast":null,"code":"var _jsxFileName = \"D:\\\\Programming\\\\Projects\\\\Blog Website\\\\client\\\\src\\\\pages\\\\LoginPage.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { UserContext } from \"../UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LoginPage() {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [redirect, setRedirect] = useState(false);\n  const {\n    setUserInfo\n  } = useContext(UserContext);\n  const [show, setShow] = useState(false);\n  const handleShow = () => {\n    setShow(!show);\n  };\n  async function login(ev) {\n    ev.preventDefault();\n    try {\n      const response = await fetch('http://localhost:4000/login', {\n        method: 'POST',\n        body: JSON.stringify({\n          username,\n          password\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const userInfo = await response.json();\n        setUserInfo(userInfo);\n        setRedirect(true);\n      } else {\n        const errorData = await response.json();\n        alert(`Login failed: ${errorData.message}`);\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      alert('An error occurred during login.');\n    }\n  }\n  if (redirect) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: '/'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"login\",\n    onSubmit: login,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"username\",\n      value: username,\n      onChange: ev => setUsername(ev.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: show ? \"text\" : \"password\",\n      placeholder: \"password\",\n      value: password,\n      onChange: ev => setPassword(ev.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      type: \"button\",\n      className: \"my-2\",\n      htmlFor: \"password\",\n      onClick: handleShow,\n      style: {\n        cursor: 'pointer'\n      },\n      children: show ? \"Hide\" : \"Show\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(LoginPage, \"exJRhVagO79MZaJX6e4tU753RUs=\");\n_c = LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["useContext","useState","Navigate","UserContext","jsxDEV","_jsxDEV","LoginPage","_s","username","setUsername","password","setPassword","redirect","setRedirect","setUserInfo","show","setShow","handleShow","login","ev","preventDefault","response","fetch","method","body","JSON","stringify","headers","credentials","ok","userInfo","json","errorData","alert","message","error","console","to","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","children","type","placeholder","value","onChange","target","htmlFor","onClick","style","cursor","_c","$RefreshReg$"],"sources":["D:/Programming/Projects/Blog Website/client/src/pages/LoginPage.js"],"sourcesContent":["import {useContext, useState} from \"react\";\r\nimport {Navigate} from \"react-router-dom\";\r\nimport {UserContext} from \"../UserContext\";\r\n\r\nexport default function LoginPage() {\r\n  const [username,setUsername] = useState('');\r\n  const [password,setPassword] = useState('');\r\n  const [redirect,setRedirect] = useState(false);\r\n  const {setUserInfo} = useContext(UserContext);\r\n  const [show, setShow] = useState(false);\r\n\r\n  const handleShow = () => {\r\n    setShow(!show);\r\n  };\r\n  \r\n  async function login(ev) {\r\n    ev.preventDefault();\r\n    try {\r\n        const response = await fetch('http://localhost:4000/login', {\r\n          method: 'POST',\r\n          body: JSON.stringify({ username, password }),\r\n          headers: { 'Content-Type': 'application/json' },\r\n          credentials: 'include',\r\n        });\r\n      \r\n        if (response.ok) {\r\n          const userInfo = await response.json();\r\n          setUserInfo(userInfo);\r\n          setRedirect(true);\r\n        } else {\r\n          const errorData = await response.json();\r\n          alert(`Login failed: ${errorData.message}`);\r\n        }\r\n      } catch (error) {\r\n        console.error('Login error:', error);\r\n        alert('An error occurred during login.');\r\n      }\r\n      \r\n  }\r\n\r\n  if (redirect) {\r\n    return <Navigate to={'/'} />\r\n  }\r\n  return (\r\n    <form className=\"login\" onSubmit={login}>\r\n      <h1>Login</h1>\r\n      <input type=\"text\"\r\n             placeholder=\"username\"\r\n             value={username}\r\n             onChange={ev => setUsername(ev.target.value)}/>\r\n      <input type={show ? \"text\" : \"password\"}\r\n             placeholder=\"password\"\r\n             value={password}\r\n             onChange={ev => setPassword(ev.target.value)}/>\r\n      <label type=\"button\" className=\"my-2\" htmlFor=\"password\" onClick={handleShow} style={{cursor:'pointer'}} >\r\n              {show ? \"Hide\" : \"Show\"}\r\n            </label>       \r\n      <button>Login</button>\r\n    </form>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}