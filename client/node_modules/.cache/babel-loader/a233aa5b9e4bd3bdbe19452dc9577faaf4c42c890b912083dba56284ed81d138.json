{"ast":null,"code":"import _regeneratorRuntime from\"D:/Programming/Projects/Blog Website/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Programming/Projects/Blog Website/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Programming/Projects/Blog Website/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'react-quill/dist/quill.snow.css';import{Navigate}from\"react-router-dom\";import Editor from'../components/Editor';import{BASE_URL}from'../helper.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreatePost=function CreatePost(){var _createNewPost;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),summary=_useState4[0],setSummary=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),files=_useState8[0],setFiles=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),redirect=_useState10[0],setRedirect=_useState10[1];function createNewPost(_x){return(_createNewPost=_createNewPost||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var data,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:data=new FormData();data.set('title',title);data.set('content',content);data.set('summary',summary);data.set('file',files[0]);e.preventDefault();_context.next=8;return fetch(\"\".concat(BASE_URL,\"/post\"),{method:'POST',body:data,credentials:'include'});case 8:response=_context.sent;if(response.ok){setRedirect(true);}case 10:case\"end\":return _context.stop();}},_callee);}))).apply(this,arguments);}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/'});}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:createNewPost,children:[/*#__PURE__*/_jsx(\"input\",{type:\"title\",placeholder:\"Title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"summary\",placeholder:\"Summary\",value:summary,onChange:function onChange(e){return setSummary(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return setFiles(e.target.files);}}),/*#__PURE__*/_jsx(Editor,{onChange:setContent,value:content}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{marginTop:'10px'},children:\"Create Post\"})]});};export default CreatePost;","map":{"version":3,"names":["React","useState","Navigate","Editor","BASE_URL","jsx","_jsx","jsxs","_jsxs","CreatePost","_createNewPost","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","summary","setSummary","_useState5","_useState6","content","setContent","_useState7","_useState8","files","setFiles","_useState9","_useState10","redirect","setRedirect","createNewPost","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","data","response","wrap","_callee$","_context","prev","next","FormData","set","preventDefault","fetch","concat","method","body","credentials","sent","ok","stop","apply","arguments","to","onSubmit","children","type","placeholder","value","onChange","target","style","marginTop"],"sources":["D:/Programming/Projects/Blog Website/client/src/pages/CreatePost.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport {Navigate} from \"react-router-dom\";\r\nimport Editor from '../components/Editor';\r\nimport {BASE_URL} from '../helper.js'\r\n\r\n\r\n\r\nconst CreatePost = () => {\r\n    const [title,setTitle] = useState('')\r\n    const [summary,setSummary] = useState('')\r\n    const [content,setContent] = useState('')\r\n    const [files, setFiles] = useState('');\r\n    const [redirect, setRedirect] = useState(false)\r\n\r\n    async function createNewPost(e){\r\n        const data = new FormData();\r\n        data.set('title', title);\r\n        data.set('content', content);\r\n        data.set('summary', summary);\r\n        data.set('file', files[0])\r\n        e.preventDefault();\r\n        const response = await fetch(`${BASE_URL}/post`,{\r\n            method:'POST',\r\n            body: data,\r\n            credentials: 'include'\r\n        });\r\n        if(response.ok){\r\n            setRedirect(true);\r\n\r\n        }\r\n\r\n    }\r\n    \r\n    if (redirect){\r\n        return <Navigate to={'/'} />\r\n    }\r\n\r\n  return (\r\n    <form onSubmit={createNewPost}>\r\n        <input type=\"title\" placeholder='Title' value={title} onChange={e => setTitle(e.target.value)} />\r\n        \r\n        <input type=\"summary\" placeholder='Summary' value={summary} onChange={e => setSummary(e.target.value)}  />\r\n\r\n        <input type=\"file\" onChange={(e => setFiles(e.target.files))}  />\r\n        \r\n        <Editor onChange={setContent} value={content} />\r\n\r\n        <button type='submit' style={{marginTop: '10px'}}>Create Post</button>\r\n    </form>\r\n  )\r\n} \r\n\r\nexport default CreatePost\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}